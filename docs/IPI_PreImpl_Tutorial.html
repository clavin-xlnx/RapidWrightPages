

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-117897999-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Build an IP Integrator Design with Pre-Implemented Blocks &mdash; RapidWright 2019.2.0-beta documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/RapidWrightGear32.ico"/>
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="RapidWright PipelineGenerator Example" href="PipelineGeneratorExample.html" />
    <link rel="prev" title="Create Placed and Routed DCP to Cross SLR" href="SLR_Crosser_DCP_Creator_Tutorial.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

		  
		  
            
            <a href="http://rapidwright.io"><img src="_static/rwlogo_xsm_black.png" class="logo" alt="Logo"/></a><br/>
          
		  
          
            <a href="index.html" class="icon icon-home"> RapidWright Docs
          
          </a>
		  
          
            
            
              <div class="version">
                2019.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Getting_Started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="FPGA_Architecture.html">FPGA Architecture Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="Xilinx_Architecture.html">Xilinx Architecture Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="RapidWright_Overview.html">RapidWright Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Design_Checkpoints.html">Design Checkpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="Implementation_Basics.html">Implementation Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="PreImplemented_Module_Flow.html">A Pre-implemented Module Flow</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Tutorials.html">RapidWright Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="SLR_Crosser_DCP_Creator_Tutorial.html">Create Placed and Routed DCP to Cross SLR</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Build an IP Integrator Design with Pre-Implemented Blocks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#procedure">Procedure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="PipelineGeneratorExample.html">RapidWright PipelineGenerator Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="PreImplemented_Modules_Part_I.html">Pre-implemented Modules - Part I</a></li>
<li class="toctree-l2"><a class="reference internal" href="PreImplemented_Modules_Part_II.html">Pre-implemented Modules - Part II</a></li>
<li class="toctree-l2"><a class="reference internal" href="Create_and_Use_an_SLR_Bridge.html">Create and Use an SLR Bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="FPGA19_Workshop.html">RapidWright FPGA 2019 Deep Dive Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="FCCM19_Workshop.html">RapidWright FCCM 2019 Workshop</a></li>
<li class="toctree-l2"><a class="reference internal" href="FPL19_Tutorial.html">RapidWright FPL 2019 Tutorial</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Tech_Articles.html">Tech Articles</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
		<div class="download-links">
			<br/>
			<br/>
			<center>
				<a href="RapidWright.pdf">Download PDF<br/><img src="_static/pdf.svg"/></a>
				<br/>
				<br/>
				<br/>
				<a href="../javadoc/index.html">Javadoc API Reference<br/><img src="_static/javadoc.svg"/></a>
			</center>
		</div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">RapidWright Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="Tutorials.html">RapidWright Tutorials</a> &raquo;</li>
        
      <li>Build an IP Integrator Design with Pre-Implemented Blocks</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/IPI_PreImpl_Tutorial.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="build-an-ip-integrator-design-with-pre-implemented-blocks">
<h1>Build an IP Integrator Design with Pre-Implemented Blocks<a class="headerlink" href="#build-an-ip-integrator-design-with-pre-implemented-blocks" title="Permalink to this headline">¶</a></h1>
<dl class="docutils">
<dt>What You’ll Need to Get Started:</dt>
<dd><ul class="first last simple">
<li>Vivado 2018.2 or later</li>
<li>RapidWright 2018.2.2 or later</li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This tutorial uses the Tcl script <code class="docutils literal"><span class="pre">rapidwright.tcl</span></code> found in RapidWright.  If you are using a standalone jar, you can extract the rapidwright.tcl (and other device/data) by running <code class="docutils literal"><span class="pre">java</span> <span class="pre">-jar</span> <span class="pre">&lt;standalone.jar&gt;</span> <span class="pre">--unpack_data</span></code> and setting the environment variable RAPIDWRIGHT_PATH to the standalone jar location.</p>
</div>
<p>This tutorial will provides an example design and execution of the rapid prototyping flow found on the page <a class="reference internal" href="PreImplemented_Module_Flow.html#a-pre-implemented-module-flow"><span class="std std-ref">A Pre-implemented Module Flow</span></a>.  It begins by creating an example MicroBlaze design in IP Integrator (IPI) and showing how RapidWright can pre-implement the blocks of the design, place them and route them.  This tutorial is just a demonstration example and is still under development.</p>
<div class="section" id="procedure">
<h2>Procedure<a class="headerlink" href="#procedure" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple" start="0">
<li>Before running Vivado, be sure to make sure that your CLASSPATH environment variable is set properly (see <a class="reference internal" href="Manual_Install.html#manual-install"><span class="std std-ref">Manual Install</span></a>, steps 4 and 5).  If using the standalone jar, just set CLASSPATH=&lt;path_to_standalone_jar&gt;.</li>
<li>To generate an example placed and routed MicroBlaze design, run the following Tcl commands in your Vivado’s Tcl prompt:</li>
</ol>
<div class="highlight-tcl"><div class="highlight"><pre><span></span>create_project project_1 [pwd]/testBlockStitcher -part xcku040-ffva1156-2-e
set_property board_part [lindex [get_boards -filter NAME=~*kcu105*] end] [current_project]
set_property target_language VHDL [current_project]
create_bd_design &quot;base_mb&quot; -mode batch
update_compile_order -fileset sources_1
update_compile_order -fileset sim_1
instantiate_example_design -design base_mb base_mb
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>An XDC (Xilinx Design Constraints) file will be required for this design.  Please download <a class="reference download internal" href="_downloads/base_mb.xdc" download=""><code class="xref download docutils literal"><span class="pre">base_mb.xdc</span></code></a> amd put it into the root of your project directory (<code class="docutils literal"><span class="pre">[pwd]/testBlockStitcher</span></code>). The XDC file is required for the RapidWright flow because IP Integrator and the OOC flow may not communicate all necessary information and the RapidWright block stitcher will need to instantiate most of the IOBs automatically.</li>
<li>To run the RapidWright pre-implemented block flow, you will need to source rapidwright.tcl, add the XDC from above to the project and run the flow with the following Tcl commands:</li>
</ol>
<div class="highlight-tcl"><div class="highlight"><pre><span></span>cd [pwd]/testBlockStitcher
# Download base_mb.xdc into this directory
add_files -fileset constrs_1 -norecurse [pwd]/base_mb.xdc
source ${env(RAPIDWRIGHT_PATH)}/tcl/rapidwright.tcl
rapid_compile_ipi
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you have run this tutorial with previous versions of RapidWright, please backup your cache (if needed) run the RapidWright Tcl command <code class="docutils literal"><span class="pre">ultra_clear_cache</span></code> to reset the cache as some state in the cache is used differently.</p>
</div>
<p>This Tcl procedure will invoke Vivado to generate, synthesize, area constrain, place and route the various IPs out-of-context in the IPI design.  Unless you set the environment variable <code class="docutils literal"><span class="pre">IP_CACHE_PATH</span></code>, the IP and pre-implemented block cache defaults to <code class="docutils literal"><span class="pre">$HOME/blockCache</span></code>.  If the cache is empty, it will take several minutes to pre-implement each block.  However, this process will eventually conclude with the design being fully stitched together in the <code class="docutils literal"><span class="pre">BlockStitcher</span></code> class in RapidWright and ultimately produce a fully placed (partially routed) DCP (the RapidWright router could be used to route the inter-block connections, but has a few outstanding issues so it is currently disabled).</p>
<ol class="arabic simple" start="4">
<li>Once the pre-implemented block flow is complete, you can test its recompilation speed by re-running:</li>
</ol>
<div class="highlight-tcl"><div class="highlight"><pre><span></span><span class="nv">rapid_compile_ipi</span>
</pre></div>
</div>
<p>This should complete in less than a minute.  Any connectivity changes to the design or adding blocks that have already been stored in the cache should always compile in less than a minute.</p>
<ol class="arabic simple" start="5">
<li>The stitched and placed RapidWright-produced DCP should be in the root directory of the project with the name <code class="docutils literal"><span class="pre">base_mb_placed.dcp</span></code>.  This design can then be opened in Vivado by running the Tcl command:</li>
</ol>
<div class="highlight-tcl"><div class="highlight"><pre><span></span><span class="nv">open_checkpoint</span> .<span class="o">/</span>base_mb_placed.dcp
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li>To finalize the implementation, <code class="docutils literal"><span class="pre">route_design</span></code> can be run to finish the design.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The automatic block placer and router in RapidWright are still under development and although they can run quickly, their quality still needs to be improved.  We recommend using the an implementation guide file (see <a class="reference internal" href="PreImplemented_Module_Flow.html#implementation-guide-file"><span class="std std-ref">Implementation Guide File</span></a>). An IGF file directs the flow on how the blocks/IPs should be pre-implemented by specifying pblocks for the IPs and placement locations for the instances.  The BlockStitcher will automatically generate an example IGF called <code class="docutils literal"><span class="pre">base_mb.igf.example</span></code> in root directory of the project.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="PipelineGeneratorExample.html" class="btn btn-neutral float-right" title="RapidWright PipelineGenerator Example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="SLR_Crosser_DCP_Creator_Tutorial.html" class="btn btn-neutral" title="Create Placed and Routed DCP to Cross SLR" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-2019, Xilinx, Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2019.2.0-beta',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
      <script type="text/javascript" src="_static/copybutton.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>